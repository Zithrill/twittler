<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
      body {
        background: #e8e8e8;
        font-size: 10px;
        color: #001de8;
        font-size: 16px;
        font-weight: 300;
        line-height: 1.25;
        font-family: 'Lato', Arial, sans-serif;

      }
      ul
      {
          list-style-type: none;
          position: relative;

      }
    </style>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
    <script>
      var visitor = true;
      var userName = '';
      var currentTweet = 0;
      var topMesg = 0;
      function fetchMessages (){
        //We use this to populate the list 
        while(currentTweet <= streams.home.length -1){
          setMessage(streams.home[currentTweet]);
          currentTweet += 1;
        }
      };
      //get new chat every 100 milliseconds or 0.1 second
      window.setInterval("fetchMessages()", 100);
      //Append function for html insertion
      function appendMessage (mesgIn) {
        //add the message to the document
        $(".messages").append('<li>'  + mesgIn.created_at.toLocaleTimeString() 
                                      + ": " 
                                      + "@" 
                                      + mesgIn.user
                                      + mesgIn.message 
                                      + '</li>');
      }
      //adds an li element to the page with the content if a string
      //also deletes old elements if more than 10 are present
      function setMessage (mesgIn) {
        //Counting the number of currently displayed messages
        if ($("ul li").length < 11) {
          //Adds an element containing our message
          appendMessage(mesgIn);
        } else{
          console.log($("ul li").length);
          //if there are more than 10 messages being displayed delete the first one
          $("li").first().remove("",function(){
            //then add the new one in after the top message has been removed
            appendMessage(mesgIn);
          });
        };
      }

    </script>
    <section>
      <section id='head'><!--Header Container-->
        <h1>Twittler Feed</h1>
      </section>
      <section id='message'><!--Messages Container-->
        <div>
          <ul class="messages"></ul>
        </div>
      </section id='userInfo'> 
      <section><!--User Info Container-->
        <div>
          
        </div>
      </section>
      <section><!--Empty Container-->
        
      </section>    
    </section>
  </body>
</html>
